(function(g){g.fn.twitterfeed=function(m,c,n){c=g.extend({limit:10,header:!0,tweeticon:!0,tweetname:!0,tweettime:!0,retweets:!0,replies:!0,showerror:!0,ssl:!1},c);return this.each(function(q,o){var k=g(o),d="";k.hasClass("twitterFeed")||k.addClass("twitterFeed");if(null==m)return!1;200<c.limit&&(c.limit=200);c.ssl&&(d="s");c.replies=!0==c.replies?!1:!0;var d="http"+d+"://api.twitter.com/1/statuses/user_timeline.json?include_rts="+c.retweets+"&exclude_replies="+c.replies+"&screen_name="+m+"&count="+
c.limit,p={};p.count=c.limit;g.ajax({url:d,data:p,dataType:"jsonp",success:function(e){var d=c;if(e){var b="",l="odd";if(d.header)var h=e[0].user.name,a=e[0].user.profile_image_url,i='<a href="http://twitter.com/'+e[0].user.screen_name+'/" title="Visit '+h+' on Twitter">',b=b+('<div class="twitterHeader">'+i+'<img src="'+a+'" alt="'+h+'" /></a><span>'+i+h+"</a></span></div>");for(var b=b+'<div class="twitterBody"><ul>',j=0;j<e.length;j++){var f=e[j].retweeted_status?e[j].retweeted_status:e[j],i='<a href="http://twitter.com/'+
f.user.screen_name+'/" title="Visit '+f.user.name+' on Twitter">',b=b+('<li class="twitterRow '+l+'">');if(d.tweeticon){a=f.user.profile_image_url;b=b+(i+'<img src="'+a+'" alt="'+h+'" /></a>')}if(d.tweetname){h=f.user.name;b=b+('<div class="tweetName">'+i+h+"</a></div>")}if(d.tweettime){a=f.created_at;a=Date.parse(a.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"));a=new Date(a);a=Math.round(((new Date).getTime()-a.getTime())/1E3);a=a<60?"< 1m":a<3600?Math.round(a/60)-1+"m":a<86400?
Math.round(a/3600)-1+"h":a<604800?Math.round(a/86400)-1+"d":Math.round(a/604800)-1+"w";b=b+('<div class="tweetTime">'+a+"</div>")}f=f.text.replace(/(https?:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+)/,function(a){var b=a.length>30?a.substr(0,30)+"...":a;return'<a href="'+a+'" title="Click to view this link">'+b+"</a>"}).replace(/@([a-zA-Z0-9_]+)/g,'@<a href="http://twitter.com/$1" title="Click to view $1 on Twitter">$1</a>').replace(/(?:^|\s)#([^\s\.\+:!]+)/g,function(a,b){return' <a href="http://twitter.com/search?q='+
encodeURIComponent(b)+'" title="Click to view this on Twitter">#'+b+"</a>"});b=b+("<p>"+f+"</p>");b=b+"</li>";l=l=="odd"?"even":"odd"}g(o).html(b+"</ul></div>")}g.isFunction(n)&&n.call(this,k)},error:function(){c.showerror&&k.html("<p>Twitter request failed</p>")}})})}})(jQuery);